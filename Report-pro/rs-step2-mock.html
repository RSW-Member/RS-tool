<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STEP2 å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Bebas+Neue&display=swap');
:root{--bg:#0f0f0f;--surface:#191919;--border:#2a2a2a;--accent:#e8a020;--text:#f0f0f0;--text2:#888;--before:#4a9eff;--during:#a855f7;--after:#22c55e;--pickup:#f59e0b;--other:#94a3b8;--danger:#ef4444;}
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent;}
body{background:#141414;font-family:'Noto Sans JP',sans-serif;color:var(--text);}

.meta{background:#000;padding:9px 20px;display:flex;align-items:center;justify-content:center;gap:10px;border-bottom:1px solid #1a1a1a;position:sticky;top:0;z-index:400;}
.meta-title{font-size:11px;color:var(--accent);font-weight:700;letter-spacing:2px;}
.meta-tag{font-size:10px;background:rgba(232,160,32,.14);color:var(--accent);padding:3px 10px;border-radius:100px;font-weight:700;}
.vbar{background:#080808;border-bottom:1px solid var(--border);padding:8px 16px;display:flex;align-items:center;gap:6px;position:sticky;top:33px;z-index:300;overflow-x:auto;scrollbar-width:none;}
.vbar::-webkit-scrollbar{display:none;}
.vlbl{font-size:10px;color:var(--text2);font-weight:700;flex-shrink:0;}
.vbtn{flex-shrink:0;padding:5px 12px;border-radius:100px;font-size:10px;font-weight:700;background:#1a1a1a;color:var(--text2);border:1px solid var(--border);cursor:pointer;font-family:inherit;transition:all .15s;}
.vbtn.on{background:rgba(232,160,32,.12);color:var(--accent);border-color:rgba(232,160,32,.3);}

.wrap{display:flex;justify-content:center;padding:24px 16px 64px;}
.phone{width:100%;max-width:390px;background:var(--bg);border-radius:40px;overflow:hidden;box-shadow:0 0 0 1px #2e2e2e,0 40px 80px rgba(0,0,0,.85);}
.notch{height:44px;background:#000;display:flex;align-items:center;justify-content:center;}
.notch-pill{width:120px;height:34px;background:#0a0a0a;border-radius:0 0 20px 20px;}
.ah{background:var(--surface);border-bottom:2px solid var(--accent);padding:10px 16px;display:flex;align-items:center;gap:10px;}
.back-btn{background:none;border:none;color:var(--text2);font-size:22px;cursor:pointer;line-height:1;}
.ah-step{font-family:'Bebas Neue',sans-serif;font-size:18px;color:var(--accent);letter-spacing:1px;}
.ah-title{font-size:13px;font-weight:700;color:var(--text2);}
.ah-count{margin-left:auto;font-size:12px;font-weight:700;color:var(--text2);}

.body{padding:20px 16px 40px;display:flex;flex-direction:column;gap:18px;}

/* â”€â”€â”€ ã‚¿ã‚°ãƒœã‚¿ãƒ³ â”€â”€â”€ */
.section-label{font-size:11px;font-weight:700;color:var(--text2);letter-spacing:1px;display:flex;align-items:center;gap:6px;}
.section-label::before{content:'';width:3px;height:11px;background:var(--accent);border-radius:2px;}

.tag-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;}
.tag-btn{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:6px;padding:14px 4px;border-radius:16px;
  border:2px solid #1e1e1e;background:#111;color:#444;
  cursor:pointer;font-family:inherit;transition:all .2s;
  min-height:80px;
}
.tag-btn .ti{font-size:24px;line-height:1;}
.tag-btn .tc{font-size:11px;font-weight:700;line-height:1.2;text-align:center;}
.tag-btn .tn{font-size:10px;font-weight:900;padding:2px 7px;border-radius:100px;background:rgba(255,255,255,.06);margin-top:2px;}

.tag-btn.active.t-b{border-color:var(--before);background:rgba(74,158,255,.12);color:var(--before);box-shadow:0 0 0 3px rgba(74,158,255,.15),0 6px 20px rgba(74,158,255,.2);}
.tag-btn.active.t-d{border-color:var(--during);background:rgba(168,85,247,.12);color:var(--during);box-shadow:0 0 0 3px rgba(168,85,247,.15),0 6px 20px rgba(168,85,247,.2);}
.tag-btn.active.t-a{border-color:var(--after); background:rgba(34,197,94,.12); color:var(--after); box-shadow:0 0 0 3px rgba(34,197,94,.15), 0 6px 20px rgba(34,197,94,.2);}
.tag-btn.active.t-p{border-color:var(--pickup);background:rgba(245,158,11,.12);color:var(--pickup);box-shadow:0 0 0 3px rgba(245,158,11,.15),0 6px 20px rgba(245,158,11,.2);}
.tag-btn.active.t-o{border-color:var(--other); background:rgba(148,163,184,.10);color:var(--other); box-shadow:0 0 0 3px rgba(148,163,184,.12),0 6px 20px rgba(148,163,184,.15);}

/* â”€â”€â”€ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¾ãƒ¼ãƒ³ â”€â”€â”€ */
.upload-zone{
  border-radius:20px;padding:32px 20px;
  text-align:center;cursor:pointer;
  display:flex;flex-direction:column;align-items:center;gap:10px;
  transition:all .2s;
  border:3px dashed var(--border);
  background:var(--surface);
}
.upload-zone:active{transform:scale(.98);}
.uz-icon{font-size:44px;line-height:1;}
.uz-main{font-size:20px;font-weight:900;}
.uz-tag-pill{font-size:13px;font-weight:700;padding:5px 16px;border-radius:100px;}
.uz-hint{font-size:11px;color:var(--text2);}

.uz-b{border-color:var(--before)!important;background:rgba(74,158,255,.06)!important;}
.uz-d{border-color:var(--during)!important;background:rgba(168,85,247,.06)!important;}
.uz-a{border-color:var(--after)!important; background:rgba(34,197,94,.06)!important;}
.uz-p{border-color:var(--pickup)!important;background:rgba(245,158,11,.06)!important;}
.uz-o{border-color:var(--other)!important; background:rgba(148,163,184,.06)!important;}
.pill-b{background:rgba(74,158,255,.2);color:var(--before);}
.pill-d{background:rgba(168,85,247,.2);color:var(--during);}
.pill-a{background:rgba(34,197,94,.2);color:var(--after);}
.pill-p{background:rgba(245,158,11,.2);color:var(--pickup);}
.pill-o{background:rgba(148,163,184,.15);color:var(--other);}

/* â”€â”€â”€ ã‚¢ãƒƒãƒ—æ¸ˆã¿ã‚µãƒ ãƒã‚¤ãƒ« â”€â”€â”€ */
.uploaded-section{display:flex;flex-direction:column;gap:10px;}
.thumb-scroll{display:flex;gap:6px;overflow-x:auto;scrollbar-width:none;padding-bottom:4px;}
.thumb-scroll::-webkit-scrollbar{display:none;}
.thumb-item{position:relative;flex-shrink:0;width:64px;height:64px;border-radius:8px;overflow:hidden;cursor:pointer;}
.thumb-item img{width:100%;height:100%;object-fit:cover;display:block;}
.thumb-tag{position:absolute;bottom:0;left:0;right:0;font-size:8px;font-weight:700;text-align:center;padding:2px 0;}
.tb-b{background:rgba(74,158,255,.85);}
.tb-d{background:rgba(168,85,247,.85);}
.tb-a{background:rgba(34,197,94,.85);color:#000;}
.tb-p{background:rgba(245,158,11,.85);color:#000;}
.tb-o{background:rgba(148,163,184,.8);color:#000;}
.thumb-del{position:absolute;top:2px;right:2px;width:18px;height:18px;border-radius:50%;background:rgba(239,68,68,.9);display:flex;align-items:center;justify-content:center;font-size:9px;color:#fff;border:none;cursor:pointer;}

.tag-row{display:flex;align-items:center;gap:6px;margin-bottom:4px;}
.tag-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
.tag-name{font-size:12px;font-weight:700;}
.tag-cnt{font-size:11px;color:var(--text2);}
/* å‘ããƒãƒƒã‚¸ */
.orient-badge{position:absolute;top:3px;left:3px;font-size:8px;font-weight:700;padding:1px 4px;border-radius:3px;background:rgba(0,0,0,.7);color:#ccc;line-height:1.4;}
/* å‘ããƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
.orient-filter{display:flex;gap:5px;align-items:center;}
.of-btn{padding:5px 11px;border-radius:100px;font-size:11px;font-weight:700;border:1.5px solid var(--border);background:transparent;color:var(--text2);cursor:pointer;font-family:inherit;transition:all .15s;white-space:nowrap;}
.of-btn.on{background:#222;border-color:#555;color:var(--text);}
.of-btn.on.of-port{border-color:var(--accent);color:var(--accent);background:rgba(232,160,32,.1);}
.of-btn.on.of-land{border-color:var(--accent);color:var(--accent);background:rgba(232,160,32,.1);}

/* â”€â”€â”€ ãƒ•ãƒƒã‚¿ãƒ¼ â”€â”€â”€ */
.next-btn{width:100%;padding:18px;background:var(--accent);color:#000;border:none;border-radius:14px;font-size:17px;font-weight:900;font-family:inherit;cursor:pointer;transition:opacity .15s;letter-spacing:.5px;}
.next-btn:active{opacity:.85;}
.next-btn:disabled{opacity:.3;cursor:not-allowed;}

.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%) translateY(16px);background:rgba(232,160,32,.97);color:#000;padding:12px 28px;border-radius:100px;font-size:13px;font-weight:700;opacity:0;transition:all .25s;z-index:999;white-space:nowrap;pointer-events:none;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>
</head>
<body>
<div class="meta"><span class="meta-title">RS-Reporter Pro</span><span class="meta-tag">STEP2 å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span></div>
<div class="vbar">
  <span class="vlbl">çŠ¶æ…‹ï¼š</span>
  <button class="vbtn on" onclick="setV('empty',this)">åˆæœŸï¼ˆ0æšï¼‰</button>
  <button class="vbtn" onclick="setV('some',this)">æ•°æšè¿½åŠ å¾Œ</button>
  <button class="vbtn" onclick="setV('many',this)">ãŸãã•ã‚“è¿½åŠ å¾Œ</button>
</div>
<div class="wrap"><div class="phone">
<div class="notch"><div class="notch-pill"></div></div>
<div class="ah">
  <button class="back-btn" onclick="toast('ç¾å ´æƒ…å ±ã«æˆ»ã‚Šã¾ã™')">â†</button>
  <span class="ah-step">STEP 2</span><span class="ah-title" style="margin-left:6px;">ï¼ å†™çœŸã‚’ã‚¢ãƒƒãƒ—</span>
  <span class="ah-count" id="ah-count">0æš</span>
</div>

<div class="body">

  <!-- ã‚¿ã‚°é¸æŠ -->
  <div>
    <div class="section-label" style="margin-bottom:12px;">â‘  ã‚¿ã‚°ã‚’é¸ã¶</div>
    <div class="tag-grid">
      <button class="tag-btn t-b active" id="tb-b" onclick="selectTag('b',this)">
        <span class="ti">ğŸ“·</span><span class="tc">Before</span><span class="tn" id="cn-b">0</span>
      </button>
      <button class="tag-btn t-d" id="tb-d" onclick="selectTag('d',this)">
        <span class="ti">ğŸ”¨</span><span class="tc">é€ å½¢å¾Œ</span><span class="tn" id="cn-d">0</span>
      </button>
      <button class="tag-btn t-a" id="tb-a" onclick="selectTag('a',this)">
        <span class="ti">âœ¨</span><span class="tc">After</span><span class="tn" id="cn-a">0</span>
      </button>
      <button class="tag-btn t-p" id="tb-p" onclick="selectTag('p',this)">
        <span class="ti">â­</span><span class="tc">ã“ã <br>ã‚ã‚Š</span><span class="tn" id="cn-p">0</span>
      </button>
      <button class="tag-btn t-o" id="tb-o" onclick="selectTag('o',this)">
        <span class="ti">ğŸ“Œ</span><span class="tc">ãã®ä»–</span><span class="tn" id="cn-o">0</span>
      </button>
    </div>
  </div>

  <!-- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¾ãƒ¼ãƒ³ -->
  <div>
    <div class="section-label" style="margin-bottom:12px;">â‘¡ å†™çœŸã‚’ã‚¢ãƒƒãƒ—</div>
    <div class="upload-zone uz-b" id="uz" onclick="onUpload()">
      <div class="uz-icon">ğŸ“</div>
      <div class="uz-main">ã‚¿ãƒƒãƒ—ã—ã¦è¿½åŠ </div>
      <div class="uz-tag-pill pill-b" id="uz-pill">ğŸ“· Before ã¨ã—ã¦è¿½åŠ </div>
      <div class="uz-hint">è¤‡æ•°é¸æŠOK</div>
    </div>
  </div>

  <!-- ã‚¢ãƒƒãƒ—æ¸ˆã¿å†™çœŸ -->
  <div class="uploaded-section" id="uploaded-section" style="display:none;">
    <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:8px;">
      <div class="section-label">ã‚¢ãƒƒãƒ—æ¸ˆã¿å†™çœŸ</div>
      <div class="orient-filter">
        <button class="of-btn on" id="of-all"  onclick="setOrient('all',this)">ã™ã¹ã¦</button>
        <button class="of-btn of-port" id="of-port" onclick="setOrient('port',this)">â–¯ ç¸¦</button>
        <button class="of-btn of-land" id="of-land" onclick="setOrient('land',this)">â–­ æ¨ª</button>
      </div>
    </div>
    <div id="thumb-area"></div>
  </div>

  <!-- æ¬¡ã¸ -->
  <button class="next-btn" id="next-btn" disabled onclick="toast('å†™çœŸã®æ•´ç†ãƒ»ãƒšã‚¢ãƒªãƒ³ã‚°ã¸é€²ã¿ã¾ã™')">
    å†™çœŸã‚’æ•´ç†ã™ã‚‹ â†’
  </button>

</div>
</div></div>
<div class="toast" id="toast-el"></div>

<script>
const TM={
  b:{uz:'uz-b',pill:'pill-b',label:'ğŸ“· Before ã¨ã—ã¦è¿½åŠ ',badge:'tb-b',name:'Before',dot:'var(--before)'},
  d:{uz:'uz-d',pill:'pill-d',label:'ğŸ”¨ é€ å½¢å¾Œ ã¨ã—ã¦è¿½åŠ ', badge:'tb-d',name:'é€ å½¢å¾Œ',dot:'var(--during)'},
  a:{uz:'uz-a',pill:'pill-a',label:'âœ¨ After ã¨ã—ã¦è¿½åŠ ',  badge:'tb-a',name:'After', dot:'var(--after)'},
  p:{uz:'uz-p',pill:'pill-p',label:'â­ ã“ã ã‚ã‚Š ã¨ã—ã¦è¿½åŠ ',badge:'tb-p',name:'ã“ã ã‚ã‚Š',dot:'var(--pickup)'},
  o:{uz:'uz-o',pill:'pill-o',label:'ğŸ“Œ ãã®ä»– ã¨ã—ã¦è¿½åŠ ', badge:'tb-o',name:'ãã®ä»–',dot:'var(--other)'},
};
let curTag='b', curOrient='all';
const photos={b:[],d:[],a:[],p:[],o:[]};
let pid=0;
const SEEDS=['s1','s2','s3','s4','s5','s6','s7','s8','s9','s10','s11','s12'];
const ORIENTS=['land','port','land','land','port','land','port','land','land','port','land','port'];
let si=0;

function setOrient(o,btn){
  curOrient=o;
  document.querySelectorAll('.of-btn').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  renderThumbs();
}

function selectTag(t,btn){
  curTag=t;
  document.querySelectorAll('.tag-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  const m=TM[t];
  document.getElementById('uz').className='upload-zone '+m.uz;
  const pill=document.getElementById('uz-pill');
  pill.className='uz-tag-pill '+m.pill;
  pill.textContent=m.label;
}

function onUpload(){
  const seed=SEEDS[si%SEEDS.length];
  const orient=ORIENTS[si%ORIENTS.length]; si++;
  const w=orient==='port'?300:400; const h=orient==='port'?400:300;
  photos[curTag].push({id:pid++,src:`https://picsum.photos/seed/${seed}/${w}/${h}`,tag:curTag,orient});
  updateAll();
  toast(TM[curTag].name+' ã«è¿½åŠ ã—ã¾ã—ãŸ');
}

function delPhoto(id,tag){
  photos[tag]=photos[tag].filter(p=>p.id!==id);
  updateAll(); toast('å‰Šé™¤ã—ã¾ã—ãŸ');
}

function updateAll(){
  const total=Object.values(photos).reduce((s,a)=>s+a.length,0);
  // ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°
  Object.keys(photos).forEach(t=>{document.getElementById('cn-'+t).textContent=photos[t].length;});
  document.getElementById('ah-count').textContent=total+'æš';
  document.getElementById('next-btn').disabled=(total===0);

  // ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º
  const sec=document.getElementById('uploaded-section');
  if(total===0){ sec.style.display='none'; return; }
  sec.style.display='flex';
  renderThumbs();
}

function renderThumbs(){
  const area=document.getElementById('thumb-area');
  const order=['b','d','a','p','o'];
  let html='';
  order.forEach(t=>{
    let L=photos[t];
    // å‘ããƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨
    if(curOrient!=='all') L=L.filter(p=>p.orient===curOrient);
    if(!L.length) return;
    const m=TM[t];
    const allCnt=photos[t].length;
    const filtCnt=L.length;
    const cntLabel=curOrient==='all'?`${allCnt}æš`:`${filtCnt}/${allCnt}æš`;
    html+=`<div style="margin-bottom:10px;">
      <div class="tag-row">
        <div class="tag-dot" style="background:${m.dot}"></div>
        <div class="tag-name">${m.name}</div>
        <div class="tag-cnt">${cntLabel}</div>
      </div>
      <div class="thumb-scroll">`;
    L.forEach(p=>{
      const oLbl=p.orient==='port'?'â–¯ç¸¦':'â–­æ¨ª';
      html+=`<div class="thumb-item">
        <img src="${p.src}" alt="">
        <div class="thumb-tag ${m.badge}">${m.name}</div>
        <div class="orient-badge">${oLbl}</div>
        <button class="thumb-del" onclick="event.stopPropagation();delPhoto(${p.id},'${t}')">âœ•</button>
      </div>`;
    });
    html+=`</div></div>`;
  });
  // å‘ããƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ™‚ã«è©²å½“ãªã—ã®å ´åˆ
  const total=Object.values(photos).reduce((s,a)=>s+a.length,0);
  if(!html&&total>0){
    html=`<div style="text-align:center;padding:16px;font-size:12px;color:var(--text2);">${curOrient==='port'?'â–¯ç¸¦':'â–­æ¨ª'}å‘ãã®å†™çœŸã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</div>`;
  }
  area.innerHTML=html;
}

// ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³
const VD={
  empty:{},
  some:{b:['s1','s2'],a:['s3'],p:['s4']},
  many:{b:['s1','s2','s3','s4'],d:['s5','s6'],a:['s7','s8','s9'],p:['s10'],o:['s11','s12']},
};
function setV(mode,btn){
  document.querySelectorAll('.vbtn').forEach(b=>b.classList.remove('on'));btn.classList.add('on');
  Object.keys(photos).forEach(t=>photos[t]=[]); pid=0; si=0;
  const d=VD[mode];
  Object.entries(d).forEach(([t,seeds])=>{
    seeds.forEach((seed,i)=>{
      const orient=ORIENTS[i%ORIENTS.length];
      const w=orient==='port'?300:400; const h=orient==='port'?400:300;
      photos[t].push({id:pid++,src:`https://picsum.photos/seed/${seed}/${w}/${h}`,tag:t,orient});
      si++;
    });
  });
  updateAll(); window.scrollTo({top:70,behavior:'smooth'});
}

let tt;
function toast(msg){const el=document.getElementById('toast-el');el.textContent=msg;el.classList.add('show');clearTimeout(tt);tt=setTimeout(()=>el.classList.remove('show'),2200);}

updateAll();
</script>
</body>
</html>
